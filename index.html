<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>GoldDrip Global Elite</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/3.3.4/vue.global.min.js"></script>
    <link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/vant@4/lib/index.css" />
    <script src="https://fastly.jsdelivr.net/npm/vant@4/lib/vant.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <style>
        :root { --gold: #FFD700; --dark: #0a0a0a; --glass: rgba(255, 255, 255, 0.05); }
        body { background: var(--dark); color: #fff; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin: 0; padding-bottom: 120px; overflow-x: hidden; }
        .glass-card { background: var(--glass); backdrop-filter: blur(15px); border: 1px solid rgba(255,255,255,0.1); border-radius: 24px; padding: 20px; margin: 15px; }
        .gold-text { background: linear-gradient(45deg, #FFD700, #FDB931, #B8860B); -webkit-background-clip: text; -webkit-text-fill-color: transparent; font-weight: bold; }
        
        /* Ø£Ø´Ø±Ø·Ø© Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª */
        .top-notice { background: rgba(255, 215, 0, 0.1) !important; color: var(--gold) !important; font-size: 11px !important; }
        .bottom-ad { position: fixed; bottom: 85px; width: 100%; background: rgba(0,0,0,0.9); border-top: 1px solid #333; height: 35px; z-index: 99; font-size: 11px; }

        /* Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹ Ø§Ù„Ù…ØªØ·ÙˆØ±Ø© */
        .deposit-box { border: 1px solid rgba(255,255,255,0.1); border-radius: 16px; padding: 12px; margin-bottom: 10px; display: flex; align-items: center; gap: 12px; transition: 0.3s; cursor: pointer; }
        .deposit-box.selected { border-color: var(--gold); background: rgba(255,215,0,0.05); }
        .crypto-icon { width: 32px; height: 32px; }

        /* ÙƒØ±ÙˆØª VIP */
        .vip-card { background: linear-gradient(135deg, rgba(255,215,0,0.1) 0%, rgba(0,0,0,0.6) 100%); border: 1px solid rgba(255,215,0,0.2); border-radius: 24px; padding: 20px; margin-bottom: 15px; }
        
        /* Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ†Ù‚Ù„ */
        .nav-footer { position: fixed; bottom: 15px; left: 15px; right: 15px; background: rgba(15,15,15,0.98); border-radius: 20px; display: flex; justify-content: space-around; padding: 12px; border: 1px solid #333; z-index: 1000; }
        .nav-item { color: #666; text-align: center; font-size: 11px; }
        .nav-item.active { color: var(--gold); }

        /* ØªØ¹Ø±ÙŠØ¨ Ø§Ù„Ù…ÙƒØªØ¨Ø© ÙˆØ¥Ù„ØºØ§Ø¡ Ø§Ù„ØµÙŠÙ†ÙŠØ© */
        .van-dialog { border-radius: 24px !important; background: #1a1a1a !important; color: #fff !important; }
        .van-dialog__header { color: var(--gold) !important; padding-top: 20px !important; }
        .van-button--default { background: #2a2a2a !important; color: #fff !important; border: none !important; }
        .van-button--primary { background: var(--gold) !important; color: #000 !important; font-weight: bold !important; }
        .van-field__label { color: #888 !important; }
        .van-field__control { color: #fff !important; }
    </style>
</head>
<body>
<div id="app" v-cloak>
    <van-notice-bar class="top-notice" left-icon="volume-o" :text="withdrawalLog" scrollable />

    <div v-if="activeTab === 'home'">
        <div class="glass-card" style="text-align: center;">
            <p style="color: #888; margin:0; font-size: 13px;">Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ù…ØªØ§Ø­</p>
            <h1 class="gold-text" style="font-size: 45px; margin: 10px 0;">${{ (user?.balance || 0).toFixed(4) }}</h1>
            <div style="font-size: 12px; opacity: 0.9;">
                <span class="gold-text">VIP {{ user?.vip || 0 }}</span> | Ø³Ø±Ø¹Ø© Ø§Ù„ØªØ¹Ø¯ÙŠÙ†: {{ speedMultiplier }}x
            </div>
        </div>

        <div style="text-align: center; margin: 35px 0;">
            <div style="width: 175px; height: 175px; border-radius: 50%; border: 4px solid var(--gold); margin: 0 auto; display: flex; align-items: center; justify-content: center; background: radial-gradient(circle, rgba(255,215,0,0.1) 0%, transparent 70%); cursor: pointer; transition: 0.2s;" @click="handleMine">
                <i class="fa-solid fa-microchip" style="font-size: 75px; color: var(--gold); filter: drop-shadow(0 0 10px var(--gold));"></i>
            </div>
            <p style="margin-top: 15px; font-size: 14px; color: #666;">Ø§Ù†Ù‚Ø± Ù„ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø°Ù‡Ø¨ Ø§Ù„Ø±Ù‚Ù…ÙŠ</p>
        </div>

        <div style="display: flex; gap: 12px; padding: 0 15px;">
            <van-button block round plain color="#FFD700" @click="showWithdraw=true">Ø³Ø­Ø¨</van-button>
            <van-button block round color="linear-gradient(45deg, #FFD700, #B8860B)" @click="showDeposit=true">
                <span style="color:#000; font-weight:bold">Ø¥ÙŠØ¯Ø§Ø¹</span>
            </van-button>
        </div>
    </div>

    <div v-if="activeTab === 'plans'" style="padding: 15px;">
        <h2 class="gold-text" style="text-align: center;">Ø®Ø·Ø· Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø± Ø§Ù„Ù…Ù„ÙƒÙŠØ© ğŸ‘‘</h2>
        
        <div class="vip-card">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <b style="font-size: 18px;">Ø¹Ø¶ÙˆÙŠØ© VIP 1</b>
                <b class="gold-text" style="font-size: 22px;">$1.00</b>
            </div>
            <p style="font-size: 12px; color: #ccc; margin: 10px 0;">â€¢ Ø§Ù„Ø±Ø¨Ø­ Ø§Ù„ÙŠÙˆÙ…ÙŠ: <b>$0.15</b><br>â€¢ ØªÙØªØ­ Ù…ÙŠØ²Ø© Ø§Ù„Ø³Ø­Ø¨ ÙÙˆØ±Ø§Ù‹ (Ø¨Ø¯ÙˆÙ† Ø­ÙˆØ§Ø¬Ø²)</p>
            <van-button block round color="#FFD700" size="small" @click="activatePlan('1')">
                <span style="color:#000; font-weight:bold">ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¹Ø¶ÙˆÙŠØ© Ø§Ù„Ø¢Ù†</span>
            </van-button>
        </div>

        <div class="vip-card" style="border-color: #00ff00;">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <b style="font-size: 18px;">Ø¹Ø¶ÙˆÙŠØ© VIP 2</b>
                <b style="font-size: 22px; color: #00ff00;">$5.00</b>
            </div>
            <p style="font-size: 12px; color: #ccc; margin: 10px 0;">â€¢ Ø§Ù„Ø±Ø¨Ø­ Ø§Ù„ÙŠÙˆÙ…ÙŠ: <b>$1.00</b><br>â€¢ Ø²ÙŠØ§Ø¯Ø© Ø³Ø±Ø¹Ø© Ø§Ù„ØªØ¹Ø¯ÙŠÙ† +30% ÙˆØ³Ù‚Ù Ø³Ø­Ø¨ Ù…Ø±ØªÙØ¹</p>
            <van-button block round color="#00ff00" size="small" @click="activatePlan('5')">
                <span style="color:#000; font-weight:bold">ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¹Ø¶ÙˆÙŠØ© Ø§Ù„Ø¢Ù†</span>
            </van-button>
        </div>
    </div>

    <van-notice-bar v-if="activeTab === 'home'" class="bottom-ad" color="#FFD700" text="Ø§Ø³ØªØ«Ù…Ø± Ø§Ù„Ø¢Ù† ÙÙŠ Ø¨Ø§Ù‚Ø§Øª VIP Ù„ÙØªØ­ Ù…ÙŠØ²Ø© Ø§Ù„Ø³Ø­Ø¨ Ø§Ù„ÙÙˆØ±ÙŠ ÙˆÙ…Ø¶Ø§Ø¹ÙØ© Ø£Ø±Ø¨Ø§Ø­Ùƒ Ø§Ù„ÙŠÙˆÙ…ÙŠØ© Ø¨Ø¶ØºØ·Ø© Ø²Ø±!" />

    <div class="nav-footer">
        <div class="nav-item" :class="{active: activeTab==='home'}" @click="activeTab='home'"><i class="fa-solid fa-house-crack" style="font-size:20px;"></i><div>Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</div></div>
        <div class="nav-item" :class="{active: activeTab==='plans'}" @click="activeTab='plans'"><i class="fa-solid fa-crown" style="font-size:20px;"></i><div>VIP</div></div>
        <div class="nav-item" @click="activeTab='about'"><i class="fa-solid fa-shield-halved" style="font-size:20px;"></i><div>Ø§Ù„Ø£Ù…Ø§Ù†</div></div>
    </div>

    <van-dialog v-model:show="showDeposit" title="Ø´Ø­Ù† Ø§Ù„Ø±ØµÙŠØ¯" show-cancel-button confirm-button-text="ØªØ£ÙƒÙŠØ¯" cancel-button-text="Ø¥Ù„ØºØ§Ø¡" @confirm="handleDeposit">
        <div style="padding: 20px;">
            <p style="font-size:12px; color:#aaa; margin-bottom:15px; text-align:center;">Ø§Ø®ØªØ± Ø§Ù„Ø¹Ù…Ù„Ø© Ù„Ø¥Ø¸Ù‡Ø§Ø± Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ø­ÙØ¸Ø©:</p>
            
            <div class="deposit-box" :class="{selected: net==='TRC20'}" @click="net='TRC20'">
                <img src="https://cryptologos.cc/logos/tether-usdt-logo.png" class="crypto-icon">
                <div><b>USDT (TRC20)</b><div style="font-size:10px; color:#666;">Ø´Ø¨ÙƒØ© Tron Ø§Ù„Ø³Ø±ÙŠØ¹Ø©</div></div>
            </div>

            <div class="deposit-box" :class="{selected: net==='BEP20'}" @click="net='BEP20'">
                <img src="https://cryptologos.cc/logos/binance-coin-bnb-logo.png" class="crypto-icon">
                <div><b>USDT (BEP20)</b><div style="font-size:10px; color:#666;">Ø´Ø¨ÙƒØ© Binance Ø§Ù„Ø°ÙƒÙŠØ©</div></div>
            </div>

            <div style="background: rgba(255,215,0,0.05); border: 1px dashed var(--gold); border-radius: 12px; padding: 12px; font-size: 11px; word-break: break-all; text-align: center; color: var(--gold); margin: 15px 0;">
                {{ net==='TRC20' ? 'TEsCEHSkKwWTLLdEuGCHnpf23e8Sv3cZto' : '0x88bea8db94f9428f282b2cc375ec68ac67fd9200' }}
            </div>
            
            <van-field v-model="tx" label="Ø±Ù‚Ù… Ø§Ù„Ø¹Ù…Ù„ÙŠØ©" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ù€ TXID Ù‡Ù†Ø§" style="background:#222; border-radius:8px;"></van-field>
        </div>
    </van-dialog>

    <van-dialog v-model:show="showWithdraw" title="Ø³Ø­Ø¨ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­" show-cancel-button confirm-button-text="Ø³Ø­Ø¨" cancel-button-text="Ø¥Ù„ØºØ§Ø¡" @confirm="handleWithdraw">
        <div style="padding: 20px;">
            <van-field v-model="wAmt" type="number" label="Ø§Ù„Ù…Ø¨Ù„Øº ($)" placeholder="Ø£Ù‚Ù„ Ù…Ø¨Ù„Øº 2$"></van-field>
            <van-field v-model="wAddr" label="Ø§Ù„Ù…Ø­ÙØ¸Ø©" placeholder="Ø¹Ù†ÙˆØ§Ù† USDT Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ"></van-field>
        </div>
    </van-dialog>
</div>

<script>
    const { createApp, ref, onMounted, computed } = Vue;
    const { showToast, showDialog } = vant;
    const SERVER = "https://steep-resonance-6443.alaabdalaziz01.workers.dev";

    createApp({
        setup() {
            // Ø­Ù„ Ù…Ø´ÙƒÙ„Ø© Undefined: ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ÙƒØ§Ø¦Ù† ÙÙˆØ±Ø§Ù‹
            const user = ref({ balance: 0, referralCount: 0, vip: 0 });
            const activeTab = ref('home');
            const userId = ref("");
            const showDeposit = ref(false);
            const showWithdraw = ref(false);
            const net = ref("TRC20");
            const tx = ref("");
            const wAmt = ref("");
            const wAddr = ref("");
            const withdrawalLog = ref("Ø¬Ø§Ø±ÙŠ ØªØ­Ø¯ÙŠØ« Ø³Ø¬Ù„ Ø§Ù„Ø³Ø­ÙˆØ¨Ø§Øª Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø©...");

            const speedMultiplier = computed(() => (1 + (user.value?.referralCount || 0) * 0.1).toFixed(1));

            onMounted(async () => {
                if (window.Telegram?.WebApp) {
                    const tg = window.Telegram.WebApp;
                    tg.expand();
                    tg.ready();
                    if (tg.initDataUnsafe?.user) {
                        userId.value = tg.initDataUnsafe.user.id;
                        await apiRequest('login');
                    }
                }
                // Ø³Ø¬Ù„ Ø³Ø­ÙˆØ¨Ø§Øª ÙˆÙ‡Ù…ÙŠ Ù„Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ù…ØµØ¯Ø§Ù‚ÙŠØ©
                setInterval(() => {
                    const id = Math.floor(Math.random() * 99);
                    const amt = (Math.random() * 10 + 2).toFixed(1);
                    withdrawalLog.value = `Ù…Ø¨Ø±ÙˆÙƒ! Ø§Ù„Ø¹Ø¶Ùˆ User***${id} Ù‚Ø§Ù… Ø¨Ø³Ø­Ø¨ ${amt}$ Ø¨Ù†Ø¬Ø§Ø­ Ø¹Ø¨Ø± Ø´Ø¨ÙƒØ© ${net.value}.`;
                }, 8000);
            });

            const apiRequest = async (action, data = {}) => {
                try {
                    const res = await fetch(SERVER, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ action, userId: userId.value, ...data })
                    });
                    const result = await res.json();
                    if (result && !result.error) {
                        user.value = result.balance !== undefined ? result : result.user;
                        return result;
                    } else if (result?.error) showToast(result.error);
                } catch (e) { 
                    console.log("Connection Error"); 
                }
            };

            const handleMine = () => {
                // Ù…Ù†Ø¹ Ø§Ù„Ø®Ø·Ø£: Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø§Ù„Ù…Ø¹Ø±Ù Ù‚Ø¨Ù„ Ø§Ù„ØªÙ†ÙÙŠØ°
                if (!userId.value) return showToast("ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ø«Ø§Ù†ÙŠØ©...");
                if (window.Telegram.WebApp.HapticFeedback) window.Telegram.WebApp.HapticFeedback.impactOccurred('medium');
                apiRequest('mine', { amount: 0.01 });
            };

            const activatePlan = (price) => {
                showToast(`ÙŠØ±Ø¬Ù‰ Ø¥ÙŠØ¯Ø§Ø¹ ${price}$ Ù„ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¨Ø§Ù‚Ø©`);
                showDeposit.value = true;
            };

            const handleDeposit = async () => {
                if(!tx.value) return showToast('Ø£Ø¯Ø®Ù„ Ø§Ù„Ù€ TXID Ù„Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©');
                await apiRequest('request_deposit', { txId: tx.value, network: net.value });
                showDialog({ message: 'ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø·Ù„Ø¨Ùƒ! Ø³ÙŠÙ‚ÙˆÙ… Ø§Ù„Ø£Ø¯Ù…Ù† Ø¨Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø¹Ù…Ù„ÙŠØ© ÙˆØªÙØ¹ÙŠÙ„ Ø­Ø³Ø§Ø¨Ùƒ Ø®Ù„Ø§Ù„ Ø¯Ù‚Ø§Ø¦Ù‚ âœ…' });
            };

            const handleWithdraw = async () => {
                if (user.value.vip < 1) return showDialog({ message: 'ØªÙ†Ø¨ÙŠÙ‡: Ø§Ù„Ø³Ø­Ø¨ Ù…ØªØ§Ø­ ÙÙ‚Ø· Ù„Ù…Ø´ØªØ±ÙƒÙŠ VIP 1 ÙˆÙ…Ø§ ÙÙˆÙ‚ Ù„Ø¶Ù…Ø§Ù† Ø£Ù…Ø§Ù† Ø§Ù„Ø³ÙŠÙˆÙ„Ø©.' });
                await apiRequest('request_withdraw', { amount: wAmt.value, wallet: wAddr.value });
            };

            return { user, activeTab, speedMultiplier, showDeposit, showWithdraw, net, tx, wAmt, wAddr, withdrawalLog, handleMine, activatePlan, handleDeposit, handleWithdraw };
        }
    }).use(vant).mount('#app');
</script>
</body>
    </html>
        
